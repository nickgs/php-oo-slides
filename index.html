<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Object Oriented PHP</title>

		<meta name="description" content="An introduction to programming Object Oriented PHP">
		<meta name="author" content="Nick Selvaggio">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">
		<link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="sego/sego_style.css">


		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
    <header>
      <div class="stack-starter">
        <blockquote>StackStarter.io/spin</blockquote>
      </div>
      <div class="spin-code">
        <blockquote>Spin Code: PHPOO</blockquote>
      </div>
    </header>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
          <h2>Object Oriented PHP</h2>
          <img class="no-style-image" style= "width: 360px;" src="https://cdn0.froala.com/assets/editor/docs/server/meta-social/php-e8c6425acd65e1cbc012639ad25598c7.png"/>
          <h6>Building solid foundations</h6>
					<p>
						<small><a href="http://www.nickgs.com">Nick Selvaggio</a> / <a href="http://www.segosolutions.com">www.segosolutions.com</a></small>
					</p>
				</section>

        <section>
          <h2>A little about me.</h2>
        </section>

				<section data-transition="linear" data-background="#527c97" data-background-transition="slide">
					<h2>A little about you.</h2>
					<aside class="notes">
              <ul>
                <li>Who is familar with OO concepts?</li>
                <li>What programming environments are you familar with?</li>
              </ul>
            </aside>
				</section>

				<section>
					<h2>Play Along!</h2>
					<img src="images/ss_logo_blkbg.png" class="no-style-image" style="width: 360px;"/>
					<blockquote>StackStarter.io/spin</blockquote>
          <blockqoute style="font-size: .8em">Spin Code: NJPHP</blockquote>
					<aside class="notes">
              <ul>
                <li>We will be going through alot of code.</li>
                <li>A spin has been configured for your enjoyment!</li>
              </ul>
            </aside>
				</section>

				<section>
					<section>
						<h2>Let's talk goals.</h2>
						<aside class="notes">
              <ul>
                <li>We want you to leave here comfortable with all the core concepts of OO programming</li>
                <li>and how it applies to the PHP language.</li>
                <li>Laying the ground work to be able to dive into larger PHP software projects like Drupal.</li>
              </ul>
            </aside>
					</section>
					<section>
            <h4>Build a solid foundation of core</h4>
            <h2>Object Oriented concepts</h2>
					</section>
					<section>
            <h4>Apply this foundation to the</h4>
            <h2>PHP language</h2>
					</section>
					<section>
            <h4>Leave here today feeling comfortable to dive into</h4>
            <h2>larger PHP projects, like Drupal</h2>
					</section>
				</section>

				<section>
					<section>
             <h2>Story time</h2>
          </section>
          <section>
             <h2>Brief History of PHP</h2>
             <p class="fragment" data-fragment-index="1">Open sourced by Rasmus Lerdorf in 1994</p>
             <p class="fragment" data-fragment-index="2">Flexible, dynamic language</p>
             <p class="fragment" data-fragment-index="3">Object Oriented support entered with PHP 5.0 in 2004</p>
             <p class="fragment" data-fragment-index="4">Supports many different programming paradigms.</p>
          </section>
          <section>
             <h2>Brief History of OO</h2>
             <p class="fragment" data-fragment-index="1">First started to emerge in an AI group at MIT in the 1960s (LISP atoms)</p>
             <p class="fragment" data-fragment-index="2">Formally introducted with the Simula 67 language</p>
             <p class="fragment" data-fragment-index="3">Many languages and environments support the paradigm today.</p>
             <p class="fragment" data-fragment-index="4">Java, C++, C#</p>
              <aside class="notes">
              <ul>
                <li>Much older then PHP</li>
              </ul>
            </aside>
          </section>
				</section>
        <section>
            <section>
              <h2>Core Concepts</h2>
            </section>
            <section>
              <h2>Procedural Code</h2> 
              <h5>vs</h5> 
              <h2>Object Oriented Code</h2>
              <aside class="notes">
                <ul>
                  <li>Live coding demo</li>
                </ul>
              </aside>
            </section>
            <section>
             <h2>Lets Review our Object Oriented Concepts</h2>
            </section>
            <section data-transition="linear" data-background="#527c97" data-background-transition="slide">
             <h2>The 4 Pillars of OOP</h2>
             <p class="fragment" data-fragment-index="1">Abstraction</p>
             <p class="fragment" data-fragment-index="2">Encapsulation</p>
             <p class="fragment" data-fragment-index="3">Inheritance</p>
             <p class="fragment" data-fragment-index="4">Polymorphism</p>
              <aside class="notes">
              <ul>
                <li>Abstraction - Expose essential features and hide the rest.</li>
                <li>Encapsulation - Embody the features of your software within reuseable components. </li>
                <li>Inheritance - Reuse your code by extending it and overriding where needed.</li>
                <li>Polymorphism - Subclasses can take on the behavior of their parents. ex. Circle can look like a Shape.</li>
              </ul>
             </aside>
            </section>
        </section>
        <section>
          <section>
            <h2>Classes and Objects</h2>
            <img width="600px" src = "https://velvetchainsaw.com/wp-content/uploads/2010/06/blueprint.jpg"/>
          </section>
          <section>
            <h2>The Class Keyword</h2>
            <pre>
              <code class="php" data-trim>
/**
 * Our first Class definition
 */
 class House {
 }
              </code></pre>
          </section>
          <section>
              <h2>Build a house in OO?</h2>
              <pre>
                <code class="php" data-trim>
/**
* Our first Class definition
*/
class House {
}

// Lets contruct!
$myHouse = new House();
                </code></pre>
                <div class="fragment" data-fragment-index="1">
                    <p>At this point $myHouse is an object of type House.</p>
                  </div>
            </section>
            <section>
              <h2>How can we further build this?</h2>
              <div class="fragment" data-fragment-index="1">
                  <p>An object fundamentally consists of data and behavior</p>
                </div>
            </section>
            <section>
                <h4>We describe our data in</h4>
                <h2>Properties</h2>
                <pre>
                    <code class="php" data-trim>
/**
* Our first Class definition
*/
class House {
  // A property decribing the number of rooms in this house.
  public $num_rooms;
}

                </code></pre>
              </section>
              <section>
                  <h4>We describe our behavior in</h4>
                  <h2>Methods</h2>
                  <pre>
                      <code class="php" data-trim>
  /**
  * Our first Class definition
  */
  class House {
    // A property decribing the number of rooms in this house.
    public $num_rooms;

    // A method which returns the number of rooms in this house.
    public function getNumRooms(){
      return $this->num_rooms;
    }
  }
  
                  </code></pre>

                </section>
                <section>
                  <h2>The -> operator</h2>
                  <p>We use this operator, called the 'arrow operator', to access the methods and properties of an object.</p>
                </section>
                <section>
                    <pre>
                        <code class="php" data-trim>
    /**
    * Our first Class definition
    */
    class House {
      // A property decribing the number of rooms in this house.
      public $num_rooms;
  
      // A method which returns the number of rooms in this house.
      public function getNumRooms(){
        return $this->num_rooms;
      }
    }

    $myHouse = new House();
    $myHouse->num_rooms = 2;
    echo $myHouse->getNumRooms();
    
                    </code></pre>
                </section>
                <section>
                    <h2>What the heck is $this?</h2>
                    <p>
                      <img src="https://y.yarn.co/b41335ff-d3cd-479c-9d33-6bae77c1cbee_text_hi.gif"></img>
                    </p>
                    <p class="fragment" data-fragment-index="1">Very simply it is a reference to itself.</p>
                  </section>
                  <section>
                    <h5>Public, Private, Protected</h5>
                    <h2>Oh my!</h2>
                    <h5><a href="https://github.com/nickgs/php-oo-notes/blob/master/notes/encapsulation.md" target="_blank">Let's talk about Encapsulation</a></h5>
                  </section>
                  <section>
                    <h2>Lets talk a bit about coding standards</h2>
                    <p class="fragment" data-fragment-index="1">Class names are CamelCased.</p>
                    <p class="fragment" data-fragment-index="2">Properties and Methods are lowerCamelCased</p>
                    <p class="fragment" data-fragment-index="3">You only should have 1 class per file.</p>
                    <p class="fragment" data-fragment-index="4">We do not include an closing ?> tag.</p>
                  </section>
        </section>
       
				<section>
					<section>
						<h2>Lets dive into an exercise!</h2>
            <img src="images/dive_in.gif"/>
            <h3><a target="_blank" href="https://github.com/nickgs/php-oo-notes/blob/master/exercises/exercise1.md">Exercise #1</a></h3>
					</section>
				</section>
				<section>
          <section>
            <h2>Awesome work!</h2>
            <p>Let's build on these ideas</p>
          </section>
          <section>
            <h2>Autoloading</h2>
            <p>Automatically including the classes we need when we need them.</p>
          </section>
          <section>
            <h2>Namespaces</h2>
            <p>Using Objects at any scale will require us to organize our code in manageable ways.</p>
          </section>
          <section>
            <h2>Enter Composer!</h2>
            <img src="https://getcomposer.org/img/logo-composer-transparent2.png"/>
          </section>
				</section>
				<section>
            <section>
              <h2>Lets play with these tools...</h2>
              <h3><a href="https://github.com/nickgs/php-oo-notes/blob/master/notes/autoloading.md" target="_blank">Some notes</a></h3>
            </section>
        </section>
        <section>
          <section>
            <h2>Reusing code</h2>
          </section>
          <section>
            <h4>Building on exsisting code via</h4>
            <h2>Inheritance</h2>
            <p class="fragment" data-fragment-index="1">Used to extend the implementation of a "parent" class</p>
            <p class="fragment" data-fragment-index="2">Our "child" class "inherits" all the public and protected properties/methods of its parent</p>
            <p class="fragment" data-fragment-index="3">PHP has a single inheritance model</p>    
          </section>
          <section>
            <h4>This results in visualizing our program as a</h4>
            <h2>directed graph</h2>
          </section>
          <section>
            <h2>Lets work through an example.</h2>
            <h3><a href="https://github.com/nickgs/php-oo-notes/blob/master/exercises/exercise2.md" target="_blank">Exercise #2</a></h3>
          </section>
        </section>
        <section>
          <section>
            <h4>Look at us...</h4>
            <h2>Abstracting, Encapsulating, and Inheriting!</h2>
          </section>
          <section>
            <h4>Lets take a step back</h4>
            <h2>and look at Testing!</h2>
          </section>
          <section>
            <h2>PHPUnit</h2>
            <h4>PHP's unit testing framework</h4>
          </section>
          <section>
            <h2>Lets bring PHPUnit into our project</h2>
            <pre><code class="bash" data-trim>
              composer require --dev phpunit/phpunit ^6
            </pre></code>
          </section>
          <section>
            <h2>Writing our first test</h2>
            <pre><code class="php" data-trim>
use PHPUnit\Framework\TestCase;

// Bring in our Car class.
use Vehicles\Car;

final class CarTest extends TestCase {
    
    public function testCarCanBeBuilt() {
        // Instantiate a new car.
        $c = new Car();
        
        // Assert that the newly built car is in fact a Car.
        $this->assertInstanceOf(Car::class, $c);
    }
}
              </pre></code>
          </section>
          <section>
            <h2>Running this bad boy..</h2>
            <pre><code class="bash" data-trim>
                ./vendor/bin/phpunit --bootstrap ./vendor/autoload.php tests/CarTest
            </code>
            </pre>
          </section>
          <section>
            <h4>Lets go ahead and write some tests for our</h4>
            <h2>SuperCar class</h2>
          </section>
        </section>
        <section>
          <section>
            <h4>Our last Pillar</h4>
            <h2>Polymorphism</h2>
          </section>
          <section>
            <p>"The occurrence of different forms among the members of a population or colony, or in the life cycle of an individual organism."</p>
          </section>
          <section>
            <p>"Polymorphism allows the expression of some sort of contract, with potentially many types implementing that contract (whether through class inheritance or not) in different ways, each according to their own purpose. Code using that contract should not(*) have to care about which implementation is involved, only that the contract will be obeyed."</p>
          </section>
          <section>
            <h4>This is achieved in OOP with</h4>
            <h2>Interfaces</h2>
          </section>
          <section>
            <h4>A simple example:</h4>
            <pre><code class="php" data-trim>
namespace Vehicles;

interface CarInterface {
    
    public function getMake();
    
}

            </code>
            </pre>
            <p class="fragment" data-fragment-index="1">What are we saying here?</p>
          </section>
          <section>
            <h4>Lets go and use this interface</h4>
 <pre><code class="php" data-trim>
namespace Vehicles;

class Car implements CarInterface {
    private $make;  

    public function getMake() {
      return $this->make;
    }
    
}

            </code>
            </pre>
          </section>
          <section>
            <p>This opens up some interesting flexibility for us.</p>
<pre><code class="php" data-trim>
// ...
  function getVehicleMake(CarInterface $c) {
    //this can now be ANY type of Car.
    return $c->getMake();
  }

  $c = new Car();
  $c->setMake("Honda");

  $s = new SuperCar();
  $s->setMake("Lambo");

  echo getVehicleMake($c); // Honda
  echo getVehicleMake($s); //Lambo
// ...
            </code>
            </pre>
          </section>
          <section>
            <h3><a target="_blank" href="https://github.com/nickgs/php-oo-notes/blob/master/exercises/exercise3.md">Exercise #3</a></h3>
          </section>
        </section>
        <section>
          <section>
            <p>The idea of</p>
            <h2>Dependency Injection</h2>
          </section>
          <section>
            <p>Lets analyze this code:</p>
            <pre><code class="php" data-trim>
use Vehicles\Engine;

class Car implements VehicleInterface {
  private $e; //the cars engine.

  public function __construct() {
    $this->e = new Engine();
  }
}
            </code>
            </pre>
          </section>
          <section>
            <p>How is this better?</p>
            <pre><code class="php" data-trim>
use Vehicles\Engine;

class Car implements VehicleInterface {
  private $e; //the cars engine.

  public function __construct(Engine $e) {
    $this->e = $e;
  }
}
            </code>
            </pre>
          </section>
          <section>
            <p>One more improvement</p>
            <pre><code class="php" data-trim>
use Vehicles\EngineInterface;

class Car implements VehicleInterface {
  private $e; //the cars engine.

  public function __construct(EngineInterface $e) {
    $this->e = $e;
  }
}
            </code>
            </pre>
            <p class="fragment" data-fragment-index="1">We should rely on abstractions not concretions.</p>
          </section>
          <section>
              <h3><a target="_blank" href="https://github.com/nickgs/php-oo-notes/blob/master/exercises/exercise4.md">Exercise #4</a></h3>
          </section>
        </section>
      <section>
        <section>
          <h4>Phew.. ok...</h4>
          <h2>what about Drupal?</h2>
        </section>
        <section>
          <p>Lets spin up a Drupal instance</p>
          <h2>Spin Code: DRUPAL8</h2>
        </section>
        <section>
						<h2>Structure of a module</h2>
						<div class="fragment" data-fragment-index="1">
						 <p>/modules/custom/hello/hello.info.yml</p>
            <pre><code class="yaml" data-trim>
name: Hello
description: A friendly Drupal 8 module
type: module
core: 8.x
            </code></pre>
            <div class="fragment" data-fragment-index="2"><p>Modules now live in the /modules directory</p>
            </div>
            <div class="fragment" data-fragment-index="3">
            	<p>We don't need a .module file anymore!</p>
            </div>
          </div>
          </section>
          <section>
              <h2>Lets make a Page...</h2>
              <div class="fragment" data-fragment-index="1">
                <p>Without hook_menu!</p>
              </div>
               <aside class="notes">
                <ul>
                  <li>The Synfony Routing component is used for defining our routes</li>
                </ul>
              </aside>
            </section>
             <section>
      /modules/custom/hello/src/Controller/HelloController.php
          <pre><code class="php" data-trim>
/**
* Our first Drupal 8 controller.
*/
namespace Drupal\hello\Controller;

use Drupal\Core\Controller\ControllerBase;

class HelloController extends ControllerBase {
  public function sayHi() {
    return array(
      '#markup'=>"Hello Drupal 8!",
    );
  }
}
          </code></pre>
        </section>
        <section>
            <p>/modules/custom/hello/hello.routing.yml</p>
            <pre>
              <code class="yaml" data-trim>
              hello.sayHi:
  path: '/hello'
  defaults:
    _controller: '\Drupal\hello\Controller\HelloController::sayHi'
  requirements:
    _permission: 'access content'

              </code>
            </pre>
          </section>
          <section>
              <h2>What about theming our content?</h2>
              <div class="fragment" data-fragment-index="1">
                  <p>This will look procedural</p>
              </div>
            </section>
    
            <section>
              <p>/modules/custom/hello/hello.module</p>
              <pre>
                <code class="php" data-trim>
/**
* Implements hook_theme
*/
function hello_theme() {
  $theme['say_hello'] = array(
    'variables' => array(),
    'template' => 'say_hello',
  );
    
  return $theme;
}
                </code>
              </pre>
            </section>
            <section>
                <p>/modules/custom/hello/templates/say_hello.html.twig</p>
                <pre>
                  <code class="twig" data-trim>
{% trans %}
  <h1>Hello!</h1>
{% endtrans %}
                  </code>
                </pre>
              </section>
              <section>
                /modules/custom/hello/src/Controller/HelloController.php
                <pre><code class="php" data-trim>
      /**
       * Our first Drupal 8 controller.
       * Lets say HI
       */
      namespace Drupal\hello\Controller;
      
      use Drupal\Core\Controller\ControllerBase;
      
      class HelloController extends ControllerBase {
        public function sayHi() {
          return array(
              '#theme'=>'say_hello',
            );
        }
      }
                </code></pre>
              </section>
               <section>
          <h2>Services</h2>
          <blockquote class="fragment" data-fragment-index="1">
            Small (as possible) stateless objects that perform some testable task.
          </blockquote>
          <p class="fragment" data-fragment-index="2">
            This opens up an interesting and powerful world for us...
          </p>
        </section>
        <section>
          <h2>The Service Container</h2>
          <p>A service container (or dependency injection container) is a PHP object that manages the instantiation of services.</p>
        </section>
        <section>
          /modules/custom/hello/src/HelloService.php
          <pre><code class="php" data-trim>
namespace Drupal\hello;

class HelloService {
  //dead simple example.
  public function doSomeWork() {
    //some heavy lifting.
    drupal_set_message("Hello Services");
  }
}
          </code>
          </pre>
        </section>
        <section>
            <p>/modules/custom/hello/hello.services.yml</p>
              <pre>
              <code class="yaml" data-trim>
              services:
  hello.hello_service:
    class: Drupal\hello\HelloService
              </code>
            </pre>
          </section>
          <section>
            <h2>Now lets use it!</h2>
          </section>
          <section>
          /modules/custom/hello/src/Controller/HelloController.php
          <pre><code class="php" data-trim>
/**
 * Our first Drupal 8 controller with a custom service!
 * Lets say HI
 */
namespace Drupal\hello\Controller;

use Drupal\Core\Controller\ControllerBase;
use Drupal\hello\HelloService;
use Symfony\Component\DependencyInjection\ContainerInterface;

class HelloController extends ControllerBase {
  protected $helloServ;

  //our contructor is injected with our service.
  public function __construct(HelloService $s) {
    $this->helloServ = $s;
  }

  //This is the interesting method. ControllerBase will call this.
  public static function create(ContainerInterface $container) {
    //and create an instance of this class, injecting our service!
    return new static($container->get('hello.hello_service'));
  }

  public function sayHi($name) {
    //lets use that bad boy!
    $this->helloServ->doSomeWork();

    return array(
        '#theme'=>'say_hello',
        '#name' => $name,
      );
  }
}

          </code>
          </pre>
          <aside class="notes">
            static refers to whatever class in the hierarchy you called the method on.
          </aside>
        </section>
        <section>
          <h2>Services can serve many purposes</h2>
          <h5>Lets take a look at another example</h5>
        </section>
        <section>
          <h2>Drupal 8 Events</h2>
          <p>Leveraging the Symfony Framework Events.</p>
          <p>List of core events: <a href="http://bit.ly/core_events">http://bit.ly/core_events</a></p>
        </section>
        <section>
          /modules/custom/hello/src/EventSubscriber/HelloEventSubscriber.php
          <pre><code class="php" data-trim>
namespace Drupal\hello\EventSubscriber;

use Symfony\Component\HttpKernel\KernelEvents;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Drupal\Core\Session\AccountInterface;

class HelloEventSubscriber implements EventSubscriberInterface {
  protected $account;

  public function __construct(AccountInterface $account) {
    $this->account = $account;
  }

  public function checkForSomething(GetResponseEvent $event) {
      drupal_set_message("Big brother is here!");
  }

  /**
   * {@inheritdoc}
   */
  static function getSubscribedEvents() {
    $events[KernelEvents::REQUEST][] = array('checkForSomething');
    return $events;
  }
}
          </code>
          </pre>
        </section>
        <section>
            <p>/modules/custom/hello/hello.services.yml</p>
              <pre>
              <code class="yaml" data-trim>
  hello_event_subscriber:
    class: Drupal\hello\EventSubscriber\HelloEventSubscriber
    arguments: ['@current_user']
    tags: #Our Service Tags
      - {name: event_subscriber}
              </code>
            </pre>
          </section>
          <section>
            <p>So much more to explore and learn...</p>
          </section>
      </section>
        
      <section>
          <p>Thank you!</p>
          <h3>Questions?</h3>
          <p>Email: <a href='mailto:nick@segosolutions.com'>nick@segosolutions.com</a></a>
          <p>Twitter: <a href="http://twitter.com/direct">@direct</a></p>
          <p>Slides Available: <br/> <a href="http://nickgs.com/php-oo-slides">http://nickgs.com/php-oo-slides</a></p>
      </section>
			</div>
		<footer class="sego-logo">
      <a href="http://www.segosolutions.net/"><img src="sego/sego_logo_blkbg.png" alt="Sego Solutions logo" height=50" /></a>
    </footer>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Parallax scrolling
				//parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				//parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
